<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="favicon.ico" type="image/x-icon"><link rel="stylesheet" href="assets/css/just-the-docs-default.css"> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NG6S8S3" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-NG6S8S3');</script> <noscript><iframe src="https://gtm.vpon.com/ns.html?id=GTM-T7W5B96" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://gtm.vpon.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-T7W5B96');</script> <script type="text/javascript" src="assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>SDK-Android | Vpon - Data SDK</title><meta name="generator" content="Jekyll v4.0.1" /><meta property="og:title" content="SDK-Android" /><meta property="og:locale" content="en" /><meta name="description" content="Data SDK" /><meta property="og:description" content="Data SDK" /><link rel="canonical" href="http://vpon-data.github.io/data-sdk/android" /><meta property="og:url" content="http://vpon-data.github.io/data-sdk/android" /><meta property="og:site_name" content="Vpon - Data SDK" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="SDK-Android" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Data SDK","headline":"SDK-Android","url":"http://vpon-data.github.io/data-sdk/android"}</script><link rel="stylesheet" href="/assets/css/jekyll-tab.css"><link rel="stylesheet" href="/assets/css/jekyll-tabs.css"><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="/" class="site-title lh-tight"> <img class="logo" src="http://www.vpon.com/wp-content/uploads/Vpon-logo.svg" /><div class="title">Data SDK</div></a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"> <a class="nav-list-link" href="/">Overview</a><li class="nav-list-item"> <a class="nav-list-link" href="/integration_process">Integration Process</a><li class="nav-list-item sub"> <a class="nav-list-link" href="/ios">iOS SDK</a><li class="nav-list-item sub"> <a class="nav-list-link" href="/android">Android SDK</a><li class="nav-list-item sub"> <a class="nav-list-link" href="/permission">Permission</a><li class="nav-list-item sub"> <a class="nav-list-link" href="/app_submission">App Submission</a><li class="nav-list-item sub"> <a class="nav-list-link" href="/debug_mode">Debug Mode</a><li class="nav-list-item sub"> <a class="nav-list-link" href="/event">Event</a><li class="nav-list-item sub"> <a class="nav-list-link" href="/back_geo">Background Geolocation Collection</a><li class="nav-list-item"> <a class="nav-list-link" href="javascript: void(0);">Change Log</a><li class="nav-list-item sub"> <a class="nav-list-link" href="/ios_change_log">iOS SDK</a><li class="nav-list-item sub"> <a class="nav-list-link" href="/android_change_log">Android SDK</a></ul></nav><footer class="site-footer"></footer></div><div class="main" id="top"><div id="main-header" class="main-header"></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"><h1 id="android-sdk"> <a href="#android-sdk" aria-labelledby="android-sdk" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Android SDK</h1><p>Dive into the world of Data SDK integration with this comprehensive guide!</p><p>Here, we break down how to supercharge your App with key features such as Auto Events, Custom Events, and Background Geolocation Collection. Follow these simple steps:</p><ol><li><a href="#check-the-prerequisites">Check the Prerequisites</a><li><a href="#download-data-sdk">Download Data SDK</a><li><a href="#set-up-app-configurations">Set up App Configurations</a><li><a href="#initialize-data-sdk">Initialize Data SDK</a><li><a href="#set-up-background-geolocation-collection">Set up Background Geolocation Collection</a> (Optional)<li><a href="#set-up-custom-events">Set up Custom Events</a> (Optional)<li><a href="#debug-mode">Test in Debug Mode</a></ol><p>Upon completing first four steps, you’ll have fulfilled the minimum requirements and enabled <a href="/event#1-auto-events">Auto Events</a> tracking in your App.</p><p>Step 5 involves the optional setup of <a href="/back_geo">Background Geolocation Collection</a>. This powerful feature allows continuous gathering of geolocation data from users, even when your App runs in the background, to provide more personalized experiences and services.</p><p>Step 6 allows you to set up <a href="/event#2-custom-events">Custom Events</a> according to your App’s design and user needs. While optional, we highly recommend creating suitable custom events to obtain a comprehensive view of your App users.</p><p>Lastly, in step 7, use the <a href="/debug_mode">Debug Mode</a> to verify your integration status. Debug Mode facilitates testing of all SDK configurations, including Background Geolocation Collection, Auto &amp; Custom events, before launching your App on various platforms. We recommend enabling Debug Mode to ensure everything is functioning as expected, and then disabling it before your App’s publication.</p><p>This guide is designed to make the integration process intuitive and efficient, letting you focus on building and enhancing your App.</p><h2 id="check-the-prerequisites"> <a href="#check-the-prerequisites" aria-labelledby="check-the-prerequisites" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Check the Prerequisites</h2><p>Ensure that your App supports Android version <code class="highlighter-rouge">5.0 or later</code> before proceeding with the Data SDK integration.</p><h2 id="download-data-sdk"> <a href="#download-data-sdk" aria-labelledby="download-data-sdk" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Download Data SDK</h2><p>Start by downloading the Data SDK <a href="https://m.vpon.com/data/sdk/android/a-vda-obf-v2.0.5-20230720-199d0db-226782.aar">HERE</a>. Once downloaded, include the <code class="highlighter-rouge">aar</code> file in your Android Studio project.</p><h2 id="set-up-app-configurations"> <a href="#set-up-app-configurations" aria-labelledby="set-up-app-configurations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set up App Configurations</h2><h3 id="build-dependencies"> <a href="#build-dependencies" aria-labelledby="build-dependencies" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build dependencies</h3><p>In your module (app-level) Gradle file (usually <code class="highlighter-rouge">&lt;project&gt;/&lt;app-module&gt;/build.gradle</code> ), modify dependencies as below.</p><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar', '*.aar'])
    ...
    implementation 'com.google.android.gms:play-services-ads-identifier:17.0.0'

    //coroutines
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.9'
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.9'
}
</code></pre></div></div><p>If you choose to activate background geolocation data collection, also add Google Play Service Location dependency</p><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dependencies {
    ...
    //for background gelocation collection
    implementation 'com.google.android.gms:play-services-location:21.0.1'
}
</code></pre></div></div><h3 id="adjust-permissions"> <a href="#adjust-permissions" aria-labelledby="adjust-permissions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adjust Permissions</h3><p>To ensure the maximum functionality of the Data SDK, it’s essential to modify your <code class="highlighter-rouge">AndroidManifest.xml</code> file to include specific permissions. Here’s the suggested way to do it:</p><h4 id="required-permissions"> <a href="#required-permissions" aria-labelledby="required-permissions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Required Permissions</h4><p>These permissions are necessary for the SDK to operate effectively. Make sure to include these in your <code class="highlighter-rouge">AndroidManifest.xml</code>:</p><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.INTERNET"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_NETWORK_STATE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_WIFI_STATE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.CHANGE_WIFI_STATE"</span><span class="nt">/&gt;</span>
</code></pre></div></div><h4 id="recommended-additional-permissions"> <a href="#recommended-additional-permissions" aria-labelledby="recommended-additional-permissions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Recommended Additional Permissions</h4><p>We recommend adding these additional permissions to your <code class="highlighter-rouge">AndroidManifest.xml</code> file to enable data collection for network information and geolocation:</p><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.READ_PHONE_STATE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_COARSE_LOCATION"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_FINE_LOCATION"</span><span class="nt">/&gt;</span>
</code></pre></div></div><p>While these permissions are technically optional, adding them is strongly advised to take full advantage of the SDK’s features.</p><h4 id="background-geolocation-permission"> <a href="#background-geolocation-permission" aria-labelledby="background-geolocation-permission" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Background Geolocation Permission</h4><p>If you choose to activate background geolocation data collection, add this optional permission:</p><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_BACKGROUND_LOCATION"</span><span class="nt">/&gt;</span>
</code></pre></div></div><p>For more details about these permissions, refer to the <a href="/permission">Permission</a>.</p><h2 id="initialize-data-sdk"> <a href="#initialize-data-sdk" aria-labelledby="initialize-data-sdk" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Initialize Data SDK</h2><p>Initialize Data SDK in your main Application. This ensures the <a href="/event#1-auto-events">Auto Events</a> feature operates correctly.</p><p>You’ll also manage the <a href="#license-key">License Key</a>, <a href="#opt-in">Opt-in</a>, and <a href="#debug-mode">Debug Mode</a> in this step.</p><h3 id="license-key"> <a href="#license-key" aria-labelledby="license-key" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> License Key</h3><p>Upon approval of your application, you’ll receive a unique license key. If you encounter any issues or haven’t received your key, please refer to the <a href="/integration_process">Integration Process</a> for further details or email Vpon’s support team for additional support.</p><h3 id="opt-in"> <a href="#opt-in" aria-labelledby="opt-in" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Opt-In</h3><p>Data SDK respects user privacy by only collecting data with the user’s explicit consent, meaning data is gathered only when a user agrees to your App’s terms of use or privacy policy.</p><p>To help you manage this consent effectively, Data SDK offers three Opt-In options: <code class="highlighter-rouge">DEFAULT</code>, <code class="highlighter-rouge">CONSENT</code>, and <code class="highlighter-rouge">NOCONSENT</code>.</p><ul><li><code class="highlighter-rouge">DEFAULT</code>: neither granted nor declined<li><code class="highlighter-rouge">CONSENT</code>: granted<li><code class="highlighter-rouge">NOCONSENT</code>: declined</ul><p>We recommend determining the status of user consent in the initialization step, then updating the Opt-In option and forwarding it to Data SDK depending on the latest permission status. If Opt-In is set to either <code class="highlighter-rouge">NOCONSENT</code> or <code class="highlighter-rouge">DEFAULT</code>, warning messages will display on the developer console.</p><p>Here’s a setup example of License Key and Opt-in:</p><ul class="tab" data-tab="169462b6-cad3-43c3-b5e5-166ec8f50024" data-name="lic-android"><li class="active"> <a href="#">Java </a><li> <a href="#">Kotlin </a></ul><ul class="tab-content" id="169462b6-cad3-43c3-b5e5-166ec8f50024" data-name="lic-android"><li class="active"><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">vpdataAnalytics</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">licenseKey</span><span class="o">,</span> <span class="n">customerId</span><span class="o">,</span> <span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">OptIn</span><span class="o">.</span><span class="na">CONSENT</span><span class="o">);</span>
</code></pre></div></div><li><div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">vpdataAnalytics</span><span class="o">!!</span><span class="p">.</span><span class="nf">initialize</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">licenseKey</span><span class="p">,</span> <span class="n">customerId</span><span class="p">,</span> <span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nc">OptIn</span><span class="p">.</span><span class="nc">CONSENT</span><span class="p">)</span>
</code></pre></div></div></ul><h3 id="debug-mode"> <a href="#debug-mode" aria-labelledby="debug-mode" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Debug Mode</h3><p>Debug Mode allows you to interactively test your App events, including Auto, Custom, and Background Geolocation Collection.</p><p>We recommend enabling Debug Mode and providing the Debug Mode log to Vpon Vpon’s support team before submitting your App to various marketplaces, ensuring correct integration settings. If everything is working as expected, disable Debug Mode before publishing your App.</p><p>For more detailed information, you can refer to the sections on <a href="/debug_mode">Debug Mode</a> and <a href="/integration_process">Integration Process</a>.</p><p>Here’s how to toggle Debug Mode:</p><ul class="tab" data-tab="627051fc-0fc1-4d67-9993-e96e98987f96" data-name="debug-android"><li class="active"> <a href="#">Java </a><li> <a href="#">Kotlin </a></ul><ul class="tab-content" id="627051fc-0fc1-4d67-9993-e96e98987f96" data-name="debug-android"><li class="active"><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Turn Debug Mode on
vpdataAnalytics.setDebugMode(true);

// Turn Debug Mode off
vpdataAnalytics.setDebugMode(false);
</code></pre></div></div><li><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Turn Debug Mode on
vpdataAnalytics!!.setDebugMode(true)

// Turn Debug Mode off
vpdataAnalytics!!.setDebugMode(false)
</code></pre></div></div></ul><p>Here’s a complete example that demonstrates how to initialize the Data SDK:</p><h3 id="in-your-main-application"> <a href="#in-your-main-application" aria-labelledby="in-your-main-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> In your main Application</h3><ul class="tab" data-tab="32c9fa02-cadc-4a30-ac78-c5a87f35279c" data-name="all-application-android"><li class="active"> <a href="#">Java </a><li> <a href="#">Kotlin </a></ul><ul class="tab-content" id="32c9fa02-cadc-4a30-ac78-c5a87f35279c" data-name="all-application-android"><li class="active"><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">com.vpon.sdk.VpdataAnalytics</span><span class="o">;</span>

<span class="c1">// Opt-In options: </span>
<span class="c1">// VpdataAnalytics.OptIn.DEFAULT </span>
<span class="c1">// VpdataAnalytics.OptIn.CONSENT</span>
<span class="c1">// VpdataAnalytics.OptIn.NOCONSENT</span>

<span class="c1">// Debug Mode options: true/false</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainApplication</span> <span class="kd">extends</span> <span class="nc">Application</span> <span class="o">{</span>
    <span class="c1">// Set your license_key &amp; customer_id</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">licenseKey</span> <span class="o">=</span> <span class="s">"testKey"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">customerId</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>

    <span class="c1">// Configure Opt-In as VpdataAnalytics.OptIn.CONSENT when a user gives consent</span>
    <span class="c1">// Turn Debug Mode on</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">();</span>
        <span class="nc">VpdataAnalytics</span> <span class="n">vpdataAnalytics</span> <span class="o">=</span> <span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">;</span>

        <span class="c1">// Set up before vpdataAnalytics.initialize</span>
        <span class="n">vpdataAnalytics</span><span class="o">.</span><span class="na">setDebugMode</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="c1">// Set up license_key and opt-in</span>
    	<span class="c1">// If a user gives their consent, configure Opt-In as CONSENT</span>
        <span class="n">vpdataAnalytics</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">licenseKey</span><span class="o">,</span> <span class="n">customerId</span><span class="o">,</span> <span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">OptIn</span><span class="o">.</span><span class="na">CONSENT</span><span class="o">);</span>  
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><li><div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">com.vpon.sdk.VpdataAnalytics</span>

<span class="c1">// Opt-In options: </span>
<span class="c1">// VpdataAnalytics.OptIn.DEFAULT </span>
<span class="c1">// VpdataAnalytics.OptIn.CONSENT</span>
<span class="c1">// VpdataAnalytics.OptIn.NOCONSENT</span>

<span class="c1">// Debug Mode options: true/false</span>

<span class="kd">class</span> <span class="nc">MainApplication</span> <span class="p">:</span> <span class="nc">Application</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// set up your license_key &amp; customer_id</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">licenseKey</span> <span class="p">=</span> <span class="s">"testKey"</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">customerId</span> <span class="p">=</span> <span class="s">""</span>
    
    <span class="c1">// Configure Opt-In as VpdataAnalytics.OptIn.CONSENT when a user gives consent</span>
    <span class="c1">// Turn Debug Mode on</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">()</span>
        <span class="kd">val</span> <span class="py">vpdataAnalytics</span> <span class="p">=</span> <span class="nc">VpdataAnalytics</span>
	
        <span class="c1">// Set up before vpdataAnalytics.initialize</span>
        <span class="n">vpdataAnalytics</span><span class="o">!!</span><span class="p">.</span><span class="nf">setDebugMode</span><span class="p">(</span><span class="k">true</span><span class="p">)</span>
	
        <span class="c1">// Set up license_key and opt-in</span>
        <span class="n">vpdataAnalytics</span><span class="o">!!</span><span class="p">.</span><span class="nf">initialize</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">licenseKey</span><span class="p">,</span> <span class="n">customerId</span><span class="p">,</span> <span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nc">OptIn</span><span class="p">.</span><span class="nc">CONSENT</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div></ul><h2 id="set-up-background-geolocation-collection"> <a href="#set-up-background-geolocation-collection" aria-labelledby="set-up-background-geolocation-collection" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set up Background Geolocation Collection</h2><p>Background Geolocation Collection is a powerful feature that allows continuous geolocation data collection, even when your App is running in the background. However, it’s essential to respect user privacy and adhere to Google’s guidelines when implementing this feature.</p><p>Before using this function, ensure that your project settings and permissions are properly set up. You can refer to the <a href="/back_geo">Background Geolocation Collection</a> and <a href="/permission">Permission</a> sections for more details on this.</p><p>To integrate the Background Geolocation Collection feature into your Android App, follow these steps:</p><ol><li><p>Initialization: Make sure the Data SDK is properly initialized in your App before you start using the background geolocation collection feature.</p><li><p>Start/Stop Interface: Data SDK provides an interface that allows App developers to easily call and control the geolocation tracking. When calling the <code class="highlighter-rouge">startBackgroundLocationUpdate</code> method to begin collecting geolocation data, remember to set up the frequency for data collection as needed. Use the <code class="highlighter-rouge">stopBackgroundLocationUpdate</code> method to stop the data collection when it’s no longer required.</p><li><p>Accuracy Level Configuration: The SDK allows you to set the level of accuracy for geolocation data collection. There are three options available: <code class="highlighter-rouge">high</code>, <code class="highlighter-rouge">mid</code>, and <code class="highlighter-rouge">low</code> accuracy respectively. Note that the accuracy level and the frequency of updates may affect the App’s battery usage, so choose your settings carefully.</p></ol><p>Here is a sample code snippet to use these methods:</p><ul class="tab" data-tab="e616ac47-29af-4317-b073-03dd07b5c6ca" data-name="setup-background-Android"><li class="active"> <a href="#">java </a><li> <a href="#">kotlin</a></ul><ul class="tab-content" id="e616ac47-29af-4317-b073-03dd07b5c6ca" data-name="setup-background-Android"><li class="active"><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// to start geolocation collection with mid accuracy</span>
<span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">startBackgroundLocationUpdate</span><span class="o">(</span><span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">Frequency</span><span class="o">.</span><span class="na">MID</span><span class="o">);</span>

<span class="c1">// to stop geolocation collection</span>
<span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">stopBackgroundLocationUpdate</span><span class="o">();</span>

<span class="c1">// three accuracy options: high/mid/low</span>
<span class="c1">// high accuracy </span>
<span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">startBackgroundLocationUpdate</span><span class="o">(</span><span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">Frequency</span><span class="o">.</span><span class="na">HIGH</span><span class="o">);</span>
<span class="c1">// mid accuracy</span>
<span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">startBackgroundLocationUpdate</span><span class="o">(</span><span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">Frequency</span><span class="o">.</span><span class="na">MID</span><span class="o">);</span>
<span class="c1">// low accuracy</span>
<span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">startBackgroundLocationUpdate</span><span class="o">(</span><span class="nc">VpdataAnalytics</span><span class="o">.</span><span class="na">Frequency</span><span class="o">.</span><span class="na">LOW</span><span class="o">);</span>
</code></pre></div></div><li><div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// to start geolocation collection with mid accuracy</span>
<span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nf">startBackgroundLocationUpdate</span><span class="p">(</span><span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nc">Frequency</span><span class="p">.</span><span class="nc">MID</span><span class="p">)</span>

<span class="c1">// to stop geolocation collection</span>
<span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nf">stopBackgroundLocationUpdate</span><span class="p">()</span>

<span class="c1">// three accuracy options: high/mid/low</span>
<span class="c1">// high accuracy </span>
<span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nf">startBackgroundLocationUpdate</span><span class="p">(</span><span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nc">Frequency</span><span class="p">.</span><span class="nc">HIGH</span><span class="p">)</span>    
<span class="c1">// mid accuracy</span>
<span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nf">startBackgroundLocationUpdate</span><span class="p">(</span><span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nc">Frequency</span><span class="p">.</span><span class="nc">MID</span><span class="p">)</span>
<span class="c1">// low accuracy</span>
<span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nf">startBackgroundLocationUpdate</span><span class="p">(</span><span class="nc">VpdataAnalytics</span><span class="p">.</span><span class="nc">Frequency</span><span class="p">.</span><span class="nc">LOW</span><span class="p">)</span>
</code></pre></div></div></ul><p>Once you have integrated the feature, you should test it to ensure it’s working correctly. We recommend using the <a href="/debug_mode">Debug Mode</a> for this purpose. This mode allows you to interactively test your App events, including the geolocation collection, with messages displayed in the developer console.</p><h2 id="set-up-custom-events"> <a href="#set-up-custom-events" aria-labelledby="set-up-custom-events" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set up Custom Events</h2><p>Custom events are a powerful tool to gain insights into user behavior, and Data SDK makes it simple to set them up.</p><p>By utilizing the <code class="highlighter-rouge">tracker</code> method, you can set up events that carry unique names and contain additional data you wish to gather. The strength of this feature lies in its flexibility - there’s no cap on the number of events you can set up, making it adaptable to your App’s specific design and business goals.</p><p>Below, you will find examples of how to set up these custom events, along with representations of how the collected data may appear in a JSON string format on a mobile device. It’s crucial to note that this data is encrypted for user privacy and cannot be directly accessed via the App developer console.</p><p>Let’s consider an example where you’re running an e-commerce App and you want to establish a conversion funnel. In this case, tracking user interactions with various product items becomes essential. By leveraging the tracker method, you can swiftly set up an <code class="highlighter-rouge">item_view</code> event that collects details such as the product’s ID, size, color, and price.</p><ul class="tab" data-tab="7929bdfe-996b-4d40-b4a5-66bac64e32ef" data-name="custom-event-android"><li class="active"> <a href="#">Java </a><li> <a href="#">Kotlin </a><li> <a href="#">Collected Data in JSON </a></ul><ul class="tab-content" id="7929bdfe-996b-4d40-b4a5-66bac64e32ef" data-name="custom-event-android"><li class="active"><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
	<span class="nc">JSONObject</span> <span class="n">payloadJsonObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JSONObject</span><span class="o">();</span>
	<span class="k">try</span> <span class="o">{</span>
		<span class="n">payloadJsonObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"id"</span><span class="o">,</span> <span class="s">"payloadJsonObj"</span><span class="o">);</span>
		<span class="n">payloadJsonObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"Coat"</span><span class="o">);</span>
		<span class="n">payloadJsonObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"price"</span><span class="o">,</span> <span class="mi">100</span><span class="o">);</span>
		<span class="n">payloadJsonObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"color"</span><span class="o">,</span> <span class="s">"Blue"</span><span class="o">);</span>
		<span class="n">payloadJsonObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"size"</span><span class="o">,</span> <span class="s">"XL"</span><span class="o">);</span>
		<span class="n">payloadJsonObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"currency"</span><span class="o">,</span> <span class="s">"NTD"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">JSONException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
	    <span class="o">}</span>
	<span class="n">tracker</span><span class="o">.</span><span class="na">sendEvent</span><span class="o">(</span><span class="s">"item_view"</span><span class="o">,</span> <span class="n">payloadJsonObj</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div><li><div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">sendClickListener</span> <span class="p">=</span> <span class="nc">View</span><span class="p">.</span><span class="nc">OnClickListener</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">payloadJsonObj</span> <span class="p">=</span> <span class="nc">JSONObject</span><span class="p">();</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">payloadJsonObj</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"id"</span><span class="p">,</span> <span class="s">"payloadJsonObj"</span><span class="p">);</span>
            <span class="n">payloadJsonObj</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"name"</span><span class="p">,</span> <span class="s">"Coat"</span><span class="p">);</span>
            <span class="n">payloadJsonObj</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"price"</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
            <span class="n">payloadJsonObj</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"color"</span><span class="p">,</span> <span class="s">"Blue"</span><span class="p">);</span>
            <span class="n">payloadJsonObj</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"size"</span><span class="p">,</span> <span class="s">"XL"</span><span class="p">);</span>
            <span class="n">payloadJsonObj</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"currency"</span><span class="p">,</span> <span class="s">"NTD"</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nc">JSONException</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">e</span><span class="p">.</span><span class="nf">printStackTrace</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">tracker</span><span class="o">?.</span><span class="nf">sendEvent</span><span class="p">(</span><span class="s">"item_view"</span><span class="p">,</span> <span class="n">payloadJsonObj</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div><li><div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"event_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"item_view"</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03356"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coat"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Blue"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XL"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NTD"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div></ul><p>Similarly, if you’re operating an Online Travel Agency (OTA) App and want to optimize the user experience by understanding their browsing history, the tracker method can assist. It enables the configuration of a <code class="highlighter-rouge">page_view</code> event, tracing the user’s navigation journey through your App.</p><ul class="tab" data-tab="19d720af-b5c2-49e4-9d87-1994c93292fb" data-name="custom-event-android2"><li class="active"> <a href="#">Java </a><li> <a href="#">Kotlin </a><li> <a href="#">Collected Data in JSON </a></ul><ul class="tab-content" id="19d720af-b5c2-49e4-9d87-1994c93292fb" data-name="custom-event-android2"><li class="active"><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
	<span class="nc">JSONObject</span> <span class="n">payloadJsonObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JSONObject</span><span class="o">();</span>
	<span class="k">try</span> <span class="o">{</span>
		<span class="n">payloadJsonObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"previous"</span><span class="o">,</span> <span class="s">"URL of Last Page"</span><span class="o">);</span>
		<span class="n">payloadJsonObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"current"</span><span class="o">,</span> <span class="s">"URL of Current Page"</span><span class="o">);</span>
	<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">JSONException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
	<span class="o">}</span>
	<span class="n">tracker</span><span class="o">.</span><span class="na">sendEvent</span><span class="o">(</span><span class="s">"page_view"</span><span class="o">,</span> <span class="n">payloadJsonObj</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div><li><div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">sendClickListener</span> <span class="p">=</span> <span class="nc">View</span><span class="p">.</span><span class="nc">OnClickListener</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">payloadJsonObj</span> <span class="p">=</span> <span class="nc">JSONObject</span><span class="p">()</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">payloadJsonObj</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"pervious"</span><span class="p">,</span> <span class="s">"URL of Last Page"</span><span class="p">)</span>
            <span class="n">payloadJsonObj</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"current"</span><span class="p">,</span> <span class="s">"URL of Current Page"</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nc">JSONException</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">e</span><span class="p">.</span><span class="nf">printStackTrace</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="n">tracker</span><span class="o">?.</span><span class="nf">sendEvent</span><span class="p">(</span><span class="s">"page_view"</span><span class="p">,</span> <span class="n">payloadJsonObj</span><span class="p">)</span>    
    <span class="p">}</span>
</code></pre></div></div><li><div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"event_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"page_view"</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="s2">"URL of Last Page"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="s2">"URL of Current Page"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div></ul><h2 id="sample-code"> <a href="#sample-code" aria-labelledby="sample-code" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Sample Code</h2><p>See also <a href="https://github.com/vpon-sdk/Vpon-Android-Analytics">Sample Code</a> for a complete integration reference.</p><h2 id="download"> <a href="#download" aria-labelledby="download" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Download</h2><div class="table-wrapper"><table><thead><tr><th style="text-align: center">Data SDK 2.0.5<tbody><tr><td style="text-align: center"><a href="https://m.vpon.com/data/sdk/android/a-vda-obf-v2.0.5-20230720-199d0db-226782.aar">Download</a></table></div><hr><footer><p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2023 Vpon Inc. All Rights Reserved. <br/> Support Email: datasdk<span>.support@vpon.com</span></p><div class="d-flex mt-2"></div></footer></div></div></div><script src="/assets/js/jekyll-tabs.js"></script>
